

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>preprocessing.html_parser package &mdash; processing-toolbox 0.1 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="preprocessing.html_parser.tests package" href="preprocessing.html_parser.tests.html" />
    <link rel="prev" title="preprocessing.cat2vec package" href="preprocessing.cat2vec.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> processing-toolbox
          

          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">processing-toolbox</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">preprocessing</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="preprocessing.html">preprocessing package</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">processing-toolbox</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="modules.html">preprocessing</a> &raquo;</li>
        
          <li><a href="preprocessing.html">preprocessing package</a> &raquo;</li>
        
      <li>preprocessing.html_parser package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/preprocessing.html_parser.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="preprocessing-html-parser-package">
<h1>preprocessing.html_parser package<a class="headerlink" href="#preprocessing-html-parser-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="subpackages">
<h2>Subpackages<a class="headerlink" href="#subpackages" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="preprocessing.html_parser.tests.html">preprocessing.html_parser.tests package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="preprocessing.html_parser.tests.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="preprocessing.html_parser.tests.html#module-preprocessing.html_parser.tests.parser_tests">preprocessing.html_parser.tests.parser_tests module</a></li>
<li class="toctree-l2"><a class="reference internal" href="preprocessing.html_parser.tests.html#module-preprocessing.html_parser.tests.transformer_test">preprocessing.html_parser.tests.transformer_test module</a></li>
<li class="toctree-l2"><a class="reference internal" href="preprocessing.html_parser.tests.html#module-preprocessing.html_parser.tests">Module contents</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-preprocessing.html_parser.parser">
<span id="preprocessing-html-parser-parser-module"></span><h2>preprocessing.html_parser.parser module<a class="headerlink" href="#module-preprocessing.html_parser.parser" title="Permalink to this headline">¶</a></h2>
<p>object to parse reports written in html</p>
<p>compatible with scikit-learn transformer API</p>
<dl class="class">
<dt id="preprocessing.html_parser.parser.ReportsParser">
<em class="property">class </em><code class="descclassname">preprocessing.html_parser.parser.</code><code class="descname">ReportsParser</code><span class="sig-paren">(</span><em>strategy='strings', remove_sections=[], remove_tags=['h4', 'table', 'link', 'style'], col_name='report', headers='h3', stop_words=[], verbose=False, n_jobs=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/preprocessing/html_parser/parser.html#ReportsParser"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#preprocessing.html_parser.parser.ReportsParser" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">sklearn.base.BaseEstimator</span></code></p>
<p>a parser for html pages</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>strategy</strong> (<em>string, (default=’strings’)</em>) – defines the type of object returned by the transformation,
if ‘strings’, each line of the returned df is string. ‘strings’ is to
be used for CountVectorizer and TFiDFVectorizer
if ‘tokens’, the string is split into a list of words. ‘tokens’ is to
be used for gensim’s Word2Vec and Doc2Vec models</li>
<li><strong>remove_sections</strong> (<em>list, default=[]</em>) – list containing the names of the sections to be removes from</li>
<li><strong>remove_tags</strong> (<em>list, default=[‘h4’, ‘table’, ‘link’, ‘style’]</em>) – list of tags to remove from html  page</li>
<li><strong>headers</strong> (<em>str or None, default=’h3</em>) – name of the html tag that delimits the sections in the page</li>
<li><strong>stop_words</strong> (<em>list, default=[]</em>) – additional words to remove from the text, specific to the kind
of parsed document</li>
<li><strong>verbose</strong> (<em>bool, default=Fale</em>)</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="preprocessing.html_parser.parser.ReportsParser.fetch_doc">
<code class="descname">fetch_doc</code><span class="sig-paren">(</span><em>html</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/preprocessing/html_parser/parser.html#ReportsParser.fetch_doc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#preprocessing.html_parser.parser.ReportsParser.fetch_doc" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="preprocessing.html_parser.parser.ReportsParser.fit">
<code class="descname">fit</code><span class="sig-paren">(</span><em>X</em>, <em>y=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/preprocessing/html_parser/parser.html#ReportsParser.fit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#preprocessing.html_parser.parser.ReportsParser.fit" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="preprocessing.html_parser.parser.ReportsParser.transform">
<code class="descname">transform</code><span class="sig-paren">(</span><em>X</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/preprocessing/html_parser/parser.html#ReportsParser.transform"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#preprocessing.html_parser.parser.ReportsParser.transform" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>X</strong> (<em>pd.Series or DataFrame</em>)</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">each entry is either a string or list of words depending on
the strategy</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">pd.Series</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-preprocessing.html_parser.section_manager">
<span id="preprocessing-html-parser-section-manager-module"></span><h2>preprocessing.html_parser.section_manager module<a class="headerlink" href="#module-preprocessing.html_parser.section_manager" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="preprocessing.html_parser.section_manager.main_splitter">
<code class="descclassname">preprocessing.html_parser.section_manager.</code><code class="descname">main_splitter</code><span class="sig-paren">(</span><em>df, columns=['patient_id', 'date', 'cycle', 'section', 'text']</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/preprocessing/html_parser/section_manager.html#main_splitter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#preprocessing.html_parser.section_manager.main_splitter" title="Permalink to this definition">¶</a></dt>
<dd><p>splits all the entries of df</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>df</strong></li>
<li><strong>columns</strong></li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="preprocessing.html_parser.section_manager.reduce_dic">
<code class="descclassname">preprocessing.html_parser.section_manager.</code><code class="descname">reduce_dic</code><span class="sig-paren">(</span><em>dico</em>, <em>remove</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/preprocessing/html_parser/section_manager.html#reduce_dic"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#preprocessing.html_parser.section_manager.reduce_dic" title="Permalink to this definition">¶</a></dt>
<dd><p>merges key, values of a dictionary</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>dico</strong></li>
<li><strong>remove</strong></li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="preprocessing.html_parser.section_manager.splitter">
<code class="descclassname">preprocessing.html_parser.section_manager.</code><code class="descname">splitter</code><span class="sig-paren">(</span><em>patient_id</em>, <em>date</em>, <em>cycle</em>, <em>report_dict</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/preprocessing/html_parser/section_manager.html#splitter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#preprocessing.html_parser.section_manager.splitter" title="Permalink to this definition">¶</a></dt>
<dd><p>splits the report into the number of keys in report_dict</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>patient_id</strong></li>
<li><strong>date</strong></li>
<li><strong>cycle</strong></li>
<li><strong>report_dict</strong></li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-preprocessing.html_parser.text_parser">
<span id="preprocessing-html-parser-text-parser-module"></span><h2>preprocessing.html_parser.text_parser module<a class="headerlink" href="#module-preprocessing.html_parser.text_parser" title="Permalink to this headline">¶</a></h2>
<p>This script contains the functions used to parse one report, ie
the functions to split the html text into a dictionnary of
sections.</p>
<p>Only main_parser is used in practice since all the other functions
are auxiliary (~private)</p>
<dl class="function">
<dt id="preprocessing.html_parser.text_parser.clean_soup">
<code class="descclassname">preprocessing.html_parser.text_parser.</code><code class="descname">clean_soup</code><span class="sig-paren">(</span><em>soup</em>, <em>remove</em>, <em>verbose</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/preprocessing/html_parser/text_parser.html#clean_soup"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#preprocessing.html_parser.text_parser.clean_soup" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove the tags indicated in remove parameter from the soup
soup
Transfo done inplace</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>soup</strong> (<em>BeautifulSoup instance</em>)</li>
<li><strong>remove</strong> (<em>list</em>) – name of the tags to remove from the soup</li>
<li><strong>verbose</strong> (<em>bool</em>) – controls logging</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li><em>BeautifulSoup instance</em></li>
<li><em>the same as input since inline transformation</em></li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="preprocessing.html_parser.text_parser.clean_string">
<code class="descclassname">preprocessing.html_parser.text_parser.</code><code class="descname">clean_string</code><span class="sig-paren">(</span><em>s</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/preprocessing/html_parser/text_parser.html#clean_string"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#preprocessing.html_parser.text_parser.clean_string" title="Permalink to this definition">¶</a></dt>
<dd><p>remove non alphanumeric caracters from string s
returns the lowerCase string</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>s</strong> – </td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="preprocessing.html_parser.text_parser.last_tag_text">
<code class="descclassname">preprocessing.html_parser.text_parser.</code><code class="descname">last_tag_text</code><span class="sig-paren">(</span><em>final_tag</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/preprocessing/html_parser/text_parser.html#last_tag_text"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#preprocessing.html_parser.text_parser.last_tag_text" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetches text from last tag</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>final_tag</strong></td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">content of the last section</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">string</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="preprocessing.html_parser.text_parser.main_parser">
<code class="descclassname">preprocessing.html_parser.text_parser.</code><code class="descname">main_parser</code><span class="sig-paren">(</span><em>text, verbose, remove=['h4', 'table', 'link', 'style'], headers='h3'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/preprocessing/html_parser/text_parser.html#main_parser"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#preprocessing.html_parser.text_parser.main_parser" title="Permalink to this definition">¶</a></dt>
<dd><p>takes as input the string from the report and
transforms splits it into sections</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>text</strong> (<em>string</em>) – report in html format</li>
<li><strong>verbose</strong> (<em>bool</em>) – True for logging</li>
<li><strong>remove</strong> (<em>list</em>) – name of the tags to remove because contain useless information</li>
<li><strong>headers</strong> (<em>string</em>) – name of the tags that delimit the sections</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">keys are section names
values are the content of the section</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)">dict</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="preprocessing.html_parser.text_parser.parse_soup">
<code class="descclassname">preprocessing.html_parser.text_parser.</code><code class="descname">parse_soup</code><span class="sig-paren">(</span><em>soup</em>, <em>verbose</em>, <em>headers='h3'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/preprocessing/html_parser/text_parser.html#parse_soup"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#preprocessing.html_parser.text_parser.parse_soup" title="Permalink to this definition">¶</a></dt>
<dd><p>Splits the soup between headers and returns a dictionnary</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>soup</strong> (<em>BeautifulSoup instance</em>)</li>
<li><strong>verbose</strong> (<em>bool, (default=False)</em>) – weather to print informaion about parsing</li>
<li><strong>headers</strong> (<em>string</em>) – delimiters of the sections</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">keys are section names
values are section contents</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)">dict</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="preprocessing.html_parser.text_parser.text_between_tags">
<code class="descclassname">preprocessing.html_parser.text_parser.</code><code class="descname">text_between_tags</code><span class="sig-paren">(</span><em>tag1</em>, <em>tag2</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/preprocessing/html_parser/text_parser.html#text_between_tags"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#preprocessing.html_parser.text_parser.text_between_tags" title="Permalink to this definition">¶</a></dt>
<dd><p>This function fetches the text between tag 1 and tag 2
The soup should already be cleansed from useless tags such as  span</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>tag1</strong></li>
<li><strong>tag2</strong></li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li><em>string</em></li>
<li><em>all the text between tag1 and tag2</em></li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-preprocessing.html_parser">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-preprocessing.html_parser" title="Permalink to this headline">¶</a></h2>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="preprocessing.html_parser.tests.html" class="btn btn-neutral float-right" title="preprocessing.html_parser.tests package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="preprocessing.cat2vec.html" class="btn btn-neutral" title="preprocessing.cat2vec package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Valentin Charvet.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.1',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>